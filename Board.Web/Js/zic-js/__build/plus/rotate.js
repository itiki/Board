define(function(g,f){f.run=function(a,e){if(!a||!e)return!1;var c=a.getAttribute("step");null==c&&(c=0);"left"==e?3==c?c=0:c++:"right"==e&&(0==c?c=3:c--);a.setAttribute("step",c);if(document.all)switch(a.style.filter="progid:DXImageTransform.Microsoft.BasicImage(rotation="+c+")",c){case 0:a.parentNode.style.height=a.height;break;case 1:a.parentNode.style.height=a.width;break;case 2:a.parentNode.style.height=a.height;break;case 3:a.parentNode.style.height=a.width}else{var d=a.id,b=document.getElementById("canvas_"+
d);null==b&&(a.style.visibility="hidden",a.style.position="absolute",b=document.createElement("canvas"),b.setAttribute("id","canvas_"+d),a.parentNode.appendChild(b));d=b.getContext("2d");switch(c){default:case 0:b.setAttribute("width",a.width);b.setAttribute("height",a.height);d.rotate(0*Math.PI/180);d.drawImage(a,0,0);break;case 1:b.setAttribute("width",a.height);b.setAttribute("height",a.width);d.rotate(90*Math.PI/180);d.drawImage(a,0,-a.height);break;case 2:b.setAttribute("width",a.width);b.setAttribute("height",
a.height);d.rotate(180*Math.PI/180);d.drawImage(a,-a.width,-a.height);break;case 3:b.setAttribute("width",a.height),b.setAttribute("height",a.width),d.rotate(270*Math.PI/180),d.drawImage(a,-a.width,0)}}}});
