define(["jquery"],function(j){(function(e){e.toJSON=function(a,c,b,h){if("object"==typeof JSON&&JSON.stringify)return JSON.stringify(a,c,b);!h&&e.isFunction(c)&&(a=c("",a));"number"==typeof b&&(b="          ".substring(0,b));var b="string"==typeof b?b.substring(0,10):"",f=typeof a;if(null===a)return"null";if(!("undefined"==f||"function"==f)){if("number"==f||"boolean"==f)return a+"";if("string"==f)return e.quoteString(a);if("object"==f){if("function"==typeof a.toJSON)return e.toJSON(a.toJSON(),c,b,
!0);if(a.constructor===Date){b=a.getUTCMonth()+1;10>b&&(b="0"+b);h=a.getUTCDate();10>h&&(h="0"+h);var i=a.getUTCFullYear(),g=a.getUTCHours();10>g&&(g="0"+g);var d=a.getUTCMinutes();10>d&&(d="0"+d);var k=a.getUTCSeconds();10>k&&(k="0"+k);a=a.getUTCMilliseconds();100>a&&(a="0"+a);10>a&&(a="0"+a);return'"'+i+"-"+b+"-"+h+"T"+g+":"+d+":"+k+"."+a+'Z"'}h=e.isFunction(c)?function(a,b){return c(a,b)}:function(a,b){return b};i=b?"\n":"";k=b?" ":"";if(a.constructor===Array){g=[];for(d=0;d<a.length;d++)g.push((e.toJSON(h(d,
a[d]),c,b,!0)||"null").replace(/^/gm,b));return"["+i+g.join(","+i)+i+"]"}var j=[];e.isArray(c)&&(g=e.map(c,function(a){return"string"==typeof a||"number"==typeof a?a+"":null}));for(d in a){var l,f=typeof d;if(!(g&&-1==e.inArray(d+"",g))){if("number"==f)f='"'+d+'"';else if("string"==f)f=e.quoteString(d);else continue;l=e.toJSON(h(d,a[d]),c,b,!0);"undefined"!=typeof l&&j.push((f+":"+k+l).replace(/^/gm,b))}}return"{"+i+j.join(","+i)+i+"}"}}};e.evalJSON=function(a){return"object"==typeof JSON&&JSON.parse?
JSON.parse(a):eval("("+a+")")};e.secureEvalJSON=function(a){if("object"==typeof JSON&&JSON.parse)return JSON.parse(a);var c;c=a.replace(/\\["\\\/bfnrtu]/g,"@");c=c.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]");c=c.replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(c))return eval("("+a+")");throw new SyntaxError("Error parsing JSON, source is not valid.");};e.quoteString=function(a){return a.match(m)?'"'+a.replace(m,function(a){var b=j[a];if("string"===typeof b)return b;
b=a.charCodeAt();return"\\u00"+Math.floor(b/16).toString(16)+(b%16).toString(16)})+'"':'"'+a+'"'};var m=/["\\\x00-\x1f\x7f-\x9f]/g,j={"":"\\b","\t":"\\t","\n":"\\n","":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"}})(j)});
