define(function(){return function(o){(function(d,j){function k(a){a=a.cloneNode(!1);return 1<a.hash.length&&a.href.replace(l,"")===location.href.replace(l,"")}var m=0,l=/#.*$/;d.widget("ui.tabs",{version:"@VERSION",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var a=this,b=this.options,c=b.active;this.running=!1;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",
b.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(a){d(this).is(".ui-state-disabled")&&a.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){d(this).closest("li").is(".ui-state-disabled")&&this.blur()});this._processTabs();if(null===c&&(location.hash&&this.anchors.each(function(a,b){if(b.hash===location.hash)return c=a,!1}),null===c&&(c=this.tabs.filter(".ui-tabs-active").index()),null===c||-1===c))c=this.tabs.length?0:!1;!1!==c&&
(c=this.tabs.eq(c).index(),-1===c&&(c=b.collapsible?!1:0));b.active=c;!b.collapsible&&!1===b.active&&this.anchors.length&&(b.active=0);d.isArray(b.disabled)&&(b.disabled=d.unique(b.disabled.concat(d.map(this.tabs.filter(".ui-state-disabled"),function(b){return a.tabs.index(b)}))).sort());this.active=!1!==this.options.active&&this.anchors.length?this._findActive(this.options.active):d();this._refresh();this.active.length&&this.load(b.active)},_getCreateEventData:function(){return{tab:this.active,panel:!this.active.length?
d():this._getPanelForTab(this.active)}},_tabKeydown:function(a){var b=d(this.document[0].activeElement).closest("li"),c=this.tabs.index(b),e=!0;if(!this._handlePageNav(a)){switch(a.keyCode){case d.ui.keyCode.RIGHT:case d.ui.keyCode.DOWN:c++;break;case d.ui.keyCode.UP:case d.ui.keyCode.LEFT:e=!1;c--;break;case d.ui.keyCode.END:c=this.anchors.length-1;break;case d.ui.keyCode.HOME:c=0;break;case d.ui.keyCode.SPACE:a.preventDefault();clearTimeout(this.activating);this._activate(c);return;case d.ui.keyCode.ENTER:a.preventDefault();
clearTimeout(this.activating);this._activate(c===this.options.active?!1:c);return;default:return}a.preventDefault();clearTimeout(this.activating);c=this._focusNextTab(c,e);a.ctrlKey||(b.attr("aria-selected","false"),this.tabs.eq(c).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",c)},this.delay))}},_panelKeydown:function(a){!this._handlePageNav(a)&&a.ctrlKey&&a.keyCode===d.ui.keyCode.UP&&(a.preventDefault(),this.active.focus())},_handlePageNav:function(a){if(a.altKey&&
a.keyCode===d.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(a.altKey&&a.keyCode===d.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(a,b){function c(){a>e&&(a=0);0>a&&(a=e);return a}for(var e=this.tabs.length-1;-1!==d.inArray(c(),this.options.disabled);)a=b?a+1:a-1;return a},_focusNextTab:function(a,b){a=this._findNextTab(a,b);this.tabs.eq(a).focus();return a},_setOption:function(a,b){"active"===
a?this._activate(b):"disabled"===a?this._setupDisabled(b):(this._super(a,b),"collapsible"===a&&(this.element.toggleClass("ui-tabs-collapsible",b),!b&&!1===this.options.active&&this._activate(0)),"event"===a&&this._setupEvents(b),"heightStyle"===a&&this._setupHeightStyle(b))},_tabId:function(a){return a.attr("aria-controls")||"ui-tabs-"+ ++m},_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var a=this.options,b=this.tablist.children(":has(a[href])");
a.disabled=d.map(b.filter(".ui-state-disabled"),function(a){return b.index(a)});this._processTabs();!1===a.active||!this.anchors.length?(a.active=!1,this.active=d()):this.active.length&&!d.contains(this.tablist[0],this.active[0])?this.tabs.length===a.disabled.length?(a.active=!1,this.active=d()):this._activate(this._findNextTab(Math.max(0,a.active-1),!1)):a.active=this.tabs.index(this.active);this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled);this._setupEvents(this.options.event);
this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"});this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var a=
this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist");this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1});this.anchors=this.tabs.map(function(){return d("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1});this.panels=d();this.anchors.each(function(b,c){var e,f,g,h=d(c).uniqueId().attr("id"),i=d(c).closest("li"),
n=i.attr("aria-controls");k(c)?(e=c.hash,f=a.element.find(a._sanitizeSelector(e))):(g=a._tabId(i),e="#"+g,f=a.element.find(e),f.length||(f=a._createPanel(g),f.insertAfter(a.panels[b-1]||a.tablist)),f.attr("aria-live","polite"));f.length&&(a.panels=a.panels.add(f));n&&i.data("ui-tabs-aria-controls",n);i.attr({"aria-controls":e.substring(1),"aria-labelledby":h});f.attr("aria-labelledby",h)});this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},
_createPanel:function(a){return d("<div>").attr("id",a).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(a){d.isArray(a)&&(a.length?a.length===this.anchors.length&&(a=!0):a=!1);for(var b=0,c;c=this.tabs[b];b++)!0===a||-1!==d.inArray(b,a)?d(c).addClass("ui-state-disabled").attr("aria-disabled","true"):d(c).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=a},_setupEvents:function(a){var b={click:function(a){a.preventDefault()}};
a&&d.each(a.split(" "),function(a,d){b[d]="_eventHandler"});this._off(this.anchors.add(this.tabs).add(this.panels));this._on(this.anchors,b);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(a){var b,c,e=this.element.parent();"fill"===a?(d.support.minHeight||(c=e.css("overflow"),e.css("overflow","hidden")),b=e.height(),this.element.siblings(":visible").each(function(){var a=
d(this),c=a.css("position");"absolute"===c||"fixed"===c||(b-=a.outerHeight(!0))}),c&&e.css("overflow",c),this.element.children().not(this.panels).each(function(){b-=d(this).outerHeight(!0)}),this.panels.each(function(){d(this).height(Math.max(0,b-d(this).innerHeight()+d(this).height()))}).css("overflow","auto")):"auto"===a&&(b=0,this.panels.each(function(){b=Math.max(b,d(this).height("").height())}).height(b))},_eventHandler:function(a){var b=this.options,c=this.active,e=d(a.currentTarget).closest("li"),
f=e[0]===c[0],g=f&&b.collapsible,h=g?d():this._getPanelForTab(e),i=!c.length?d():this._getPanelForTab(c),c={oldTab:c,oldPanel:i,newTab:g?d():e,newPanel:h};a.preventDefault();if(!e.hasClass("ui-state-disabled")&&!e.hasClass("ui-tabs-loading")&&!this.running&&!(f&&!b.collapsible||!1===this._trigger("beforeActivate",a,c)))b.active=g?!1:this.tabs.index(e),this.active=f?d():e,this.xhr&&this.xhr.abort(),!i.length&&!h.length&&d.error("jQuery UI Tabs: Mismatching fragment identifier."),h.length&&this.load(this.tabs.index(e),
a),this._toggle(a,c)},_toggle:function(a,b){function c(){f.running=!1;f._trigger("activate",a,b)}function e(){b.newTab.closest("li").addClass("ui-tabs-active ui-state-active");g.length&&f.options.show?f._show(g,f.options.show,c):(g.show(),c())}var f=this,g=b.newPanel,h=b.oldPanel;this.running=!0;h.length&&this.options.hide?this._hide(h,this.options.hide,function(){b.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");e()}):(b.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),
h.hide(),e());h.attr({"aria-expanded":"false","aria-hidden":"true"});b.oldTab.attr("aria-selected","false");g.length&&h.length?b.oldTab.attr("tabIndex",-1):g.length&&this.tabs.filter(function(){return 0===d(this).attr("tabIndex")}).attr("tabIndex",-1);g.attr({"aria-expanded":"true","aria-hidden":"false"});b.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(a){a=this._findActive(a);a[0]!==this.active[0]&&(a.length||(a=this.active),a=a.find(".ui-tabs-anchor")[0],this._eventHandler({target:a,
currentTarget:a,preventDefault:d.noop}))},_findActive:function(a){return!1===a?d():this.tabs.eq(a)},_getIndex:function(a){"string"===typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']")));return a},_destroy:function(){this.xhr&&this.xhr.abort();this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId();
this.tabs.add(this.panels).each(function(){d.data(this,"ui-tabs-destroy")?d(this).remove():d(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")});this.tabs.each(function(){var a=d(this),b=a.data("ui-tabs-aria-controls");
b?a.attr("aria-controls",b):a.removeAttr("aria-controls")});"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(a){var b=this.options.disabled;!1!==b&&(a===j?b=!1:(a=this._getIndex(a),b=d.isArray(b)?d.map(b,function(b){return b!==a?b:null}):d.map(this.tabs,function(b,d){return d!==a?d:null})),this._setupDisabled(b))},disable:function(a){var b=this.options.disabled;if(!0!==b){if(a===j)b=!0;else{a=this._getIndex(a);if(-1!==d.inArray(a,b))return;b=d.isArray(b)?d.merge([a],
b).sort():[a]}this._setupDisabled(b)}},load:function(a,b){var a=this._getIndex(a),c=this,e=this.tabs.eq(a),f=e.find(".ui-tabs-anchor"),g=this._getPanelForTab(e),h={tab:e,panel:g};if(!k(f[0])&&(this.xhr=d.ajax({url:f.attr("href"),beforeSend:function(a,e){return c._trigger("beforeLoad",b,d.extend({jqXHR:a,ajaxSettings:e},h))}}))&&"canceled"!==this.xhr.statusText)e.addClass("ui-tabs-loading"),g.attr("aria-busy","true"),this.xhr.success(function(a){setTimeout(function(){g.html(a);c._trigger("load",b,
h)},1)}).complete(function(a,b){setTimeout(function(){"abort"===b&&c.panels.stop(!1,!0);e.removeClass("ui-tabs-loading");g.removeAttr("aria-busy");a===c.xhr&&delete c.xhr},1)})},_getPanelForTab:function(a){return this.element.find(this._sanitizeSelector("#"+d(a).attr("aria-controls")))}});!1!==d.uiBackCompat&&(d.ui.tabs.prototype._ui=function(a,b){return{tab:a,panel:b,index:this.anchors.index(a)}},d.widget("ui.tabs",d.ui.tabs,{url:function(a,b){this.anchors.eq(a).attr("href",b)}}),d.widget("ui.tabs",
d.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:function(){this._super();var a=this;this._on({tabsbeforeload:function(b,c){d.data(c.tab[0],"cache.tabs")?b.preventDefault():(d.extend(c.ajaxSettings,a.options.ajaxOptions,{error:function(b,d){try{a.options.ajaxOptions.error(b,d,c.tab.closest("li").index(),c.tab[0])}catch(g){}}}),c.jqXHR.success(function(){a.options.cache&&d.data(c.tab[0],"cache.tabs",!0)}))}})},_setOption:function(a,b){"cache"===a&&!1===b&&this.anchors.removeData("cache.tabs");
this._super(a,b)},_destroy:function(){this.anchors.removeData("cache.tabs");this._super()},url:function(a,b){this.anchors.eq(a).removeData("cache.tabs");this._superApply(arguments)}}),d.widget("ui.tabs",d.ui.tabs,{abort:function(){this.xhr&&this.xhr.abort()}}),d.widget("ui.tabs",d.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},_create:function(){this._super();this._on({tabsbeforeload:function(a,b){if(this.options.spinner){var c=b.tab.find("span"),d=c.html();c.html(this.options.spinner);b.jqXHR.complete(function(){c.html(d)})}}})}}),
d.widget("ui.tabs",d.ui.tabs,{options:{enable:null,disable:null},enable:function(a){var b=this.options,c;if(a&&!0===b.disabled||d.isArray(b.disabled)&&-1!==d.inArray(a,b.disabled))c=!0;this._superApply(arguments);c&&this._trigger("enable",null,this._ui(this.anchors[a],this.panels[a]))},disable:function(a){var b=this.options,c;if(a&&!1===b.disabled||d.isArray(b.disabled)&&-1===d.inArray(a,b.disabled))c=!0;this._superApply(arguments);c&&this._trigger("disable",null,this._ui(this.anchors[a],this.panels[a]))}}),
d.widget("ui.tabs",d.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(a,b,c){c===j&&(c=this.anchors.length);var e,f=this.options,b=d(f.tabTemplate.replace(/#\{href\}/g,a).replace(/#\{label\}/g,b)),g=!a.indexOf("#")?a.replace("#",""):this._tabId(b);b.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",!0);b.attr("aria-controls",g);a=c>=this.tabs.length;e=this.element.find("#"+g);e.length||(e=this._createPanel(g),a?
0<c?e.insertAfter(this.panels.eq(-1)):e.appendTo(this.element):e.insertBefore(this.panels[c]));e.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide();a?b.appendTo(this.tablist):b.insertBefore(this.tabs[c]);f.disabled=d.map(f.disabled,function(a){return a>=c?++a:a});this.refresh();1===this.tabs.length&&!1===f.active&&this.option("active",0);this._trigger("add",null,this._ui(this.anchors[c],this.panels[c]));return this},remove:function(a){var a=this._getIndex(a),b=this.options,c=this.tabs.eq(a).remove(),
e=this._getPanelForTab(c).remove();c.hasClass("ui-tabs-active")&&2<this.anchors.length&&this._activate(a+(a+1<this.anchors.length?1:-1));b.disabled=d.map(d.grep(b.disabled,function(b){return b!==a}),function(b){return b>=a?--b:b});this.refresh();this._trigger("remove",null,this._ui(c.find("a")[0],e[0]));return this}}),d.widget("ui.tabs",d.ui.tabs,{length:function(){return this.anchors.length}}),d.widget("ui.tabs",d.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(a){a=a.is("li")?a.find("a[href]"):
a;a=a[0];return d(a).closest("li").attr("aria-controls")||a.title&&a.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+ ++m}}),d.widget("ui.tabs",d.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(a){return d(this.options.panelTemplate).attr("id",a).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)}}),d.widget("ui.tabs",d.ui.tabs,{_create:function(){var a=this.options;null===a.active&&a.selected!==j&&(a.active=
-1===a.selected?!1:a.selected);this._super();a.selected=a.active;!1===a.selected&&(a.selected=-1)},_setOption:function(a,b){if("selected"!==a)return this._super(a,b);var c=this.options;this._super("active",-1===b?!1:b);c.selected=c.active;!1===c.selected&&(c.selected=-1)},_eventHandler:function(a){this._superApply(arguments);this.options.selected=this.options.active;!1===this.options.selected&&(this.options.selected=-1)}}),d.widget("ui.tabs",d.ui.tabs,{options:{show:null,select:null},_create:function(){this._super();
!1!==this.options.active&&this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))},_trigger:function(a,b,c){var d=this._superApply(arguments);if(!d)return!1;"beforeActivate"===a&&c.newTab.length?d=this._super("select",b,{tab:c.newTab.find(".ui-tabs-anchor")[0],panel:c.newPanel[0],index:c.newTab.closest("li").index()}):"activate"===a&&c.newTab.length&&(d=this._super("show",b,{tab:c.newTab.find(".ui-tabs-anchor")[0],panel:c.newPanel[0],index:c.newTab.closest("li").index()}));
return d}}),d.widget("ui.tabs",d.ui.tabs,{select:function(a){a=this._getIndex(a);if(-1===a)if(this.options.collapsible&&-1!==this.options.selected)a=this.options.selected;else return;this.anchors.eq(a).trigger(this.options.event+this.eventNamespace)}}),function(){var a=0;d.widget("ui.tabs",d.ui.tabs,{options:{cookie:null},_create:function(){var a=this.options,c;null==a.active&&a.cookie&&(c=parseInt(this._cookie(),10),-1===c&&(c=!1),a.active=c);this._super()},_cookie:function(b){var c=[this.cookie||
(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++a)];arguments.length&&(c.push(!1===b?-1:b),c.push(this.options.cookie));return d.cookie.apply(null,c)},_refresh:function(){this._super();this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_eventHandler:function(a){this._superApply(arguments);this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_destroy:function(){this._super();this.options.cookie&&this._cookie(null,this.options.cookie)}})}(),d.widget("ui.tabs",
d.ui.tabs,{_trigger:function(a,b,c){c=d.extend({},c);"load"===a&&(c.panel=c.panel[0],c.tab=c.tab.find(".ui-tabs-anchor")[0]);return this._super(a,b,c)}}),d.widget("ui.tabs",d.ui.tabs,{options:{fx:null},_getFx:function(){var a,b,c=this.options.fx;c&&(d.isArray(c)?(a=c[0],b=c[1]):a=b=c);return c?{show:b,hide:a}:null},_toggle:function(a,b){function c(){f.running=!1;f._trigger("activate",a,b)}function d(){b.newTab.closest("li").addClass("ui-tabs-active ui-state-active");g.length&&i.show?g.animate(i.show,
i.show.duration,function(){c()}):(g.show(),c())}var f=this,g=b.newPanel,h=b.oldPanel,i=this._getFx();if(!i)return this._super(a,b);f.running=!0;h.length&&i.hide?h.animate(i.hide,i.hide.duration,function(){b.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");d()}):(b.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),h.hide(),d())}}))})(o)}});
