define(function(){return function(h){(function(d){d.effects.effect.shake=function(b,h){var a=d(this),l="position,top,bottom,left,right,height,width".split(","),p=d.effects.setMode(a,b.mode||"effect"),c=b.direction||"left",e=b.distance||20,m=b.times||3,q=2*m+1,f=b.duration,i="up"===c||"down"===c?"top":"left",j="up"===c||"left"===c,c={},k={},n={},g=a.queue(),o=g.length;d.effects.save(a,l);a.show();d.effects.createWrapper(a);c[i]=(j?"-=":"+=")+e;k[i]=(j?"+=":"-=")+2*e;n[i]=(j?"-=":"+=")+2*e;a.animate(c,
f,b.easing);for(e=1;e<m;e++)a.animate(k,f,b.easing).animate(n,f,b.easing);a.animate(k,f,b.easing).animate(c,f/2,b.easing).queue(function(){"hide"===p&&a.hide();d.effects.restore(a,l);d.effects.removeWrapper(a);h()});1<o&&g.splice.apply(g,[1,0].concat(g.splice(o,q+1)));a.dequeue()}})(h)}});
