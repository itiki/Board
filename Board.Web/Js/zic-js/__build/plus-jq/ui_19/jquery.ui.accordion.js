define(function(){return function(d){(function(c){var n=0,j={},i={},m={};j.height=j.paddingTop=j.paddingBottom=j.borderTopWidth=j.borderBottomWidth="hide";i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="show";c.extend(m,i,{accordionHeight:"show"});c.fx.step.accordionHeight=function(b){var b=c(b.elem),a=b.data("ui-accordion-height");b.height(a.total-b.outerHeight()-a.toHide.outerHeight()+b.height())};c.widget("ui.accordion",{version:"@VERSION",options:{active:0,animate:{},
collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var b=this.accordionId="ui-accordion-"+(this.element.attr("id")||++n),a=this.options;this.prevShow=this.prevHide=c();this.element.addClass("ui-accordion ui-widget ui-helper-reset");this.headers=this.element.find(a.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all");
this._hoverable(this.headers);this._focusable(this.headers);this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide();!a.collapsible&&!1===a.active&&(a.active=0);0>a.active&&(a.active+=this.headers.length);this.active=this._findActive(a.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top");this.active.next().addClass("ui-accordion-content-active").show();this._createIcons();this.originalHeight=
this.element[0].style.height;this.refresh();this.element.attr("role","tablist");this.headers.attr("role","tab").each(function(a){var e=c(this),f=e.attr("id"),k=e.next(),h=k.attr("id");f||(f=b+"-header-"+a,e.attr("id",f));h||(h=b+"-panel-"+a,k.attr("id",h));e.attr("aria-controls",h);k.attr("aria-labelledby",f)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide();this.active.length?
this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0);this._on(this.headers,{keydown:"_keydown"});this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._setupEvents(a.event)},_getCreateEventData:function(){return{header:this.active,content:!this.active.length?c():this.active.next()}},_createIcons:function(){var b=this.options.icons;b&&(c("<span>").addClass("ui-accordion-header-icon ui-icon "+b.header).prependTo(this.headers),
this.active.children(".ui-accordion-header-icon").removeClass(b.header).addClass(b.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var b;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&
this.removeAttribute("id")});this._destroyIcons();b=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")});"content"!==this.options.heightStyle&&(this.element.css("height",this.originalHeight),b.css("height",
""))},_setOption:function(b,a){"active"===b?this._activate(a):("event"===b&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(a)),this._super(b,a),"collapsible"===b&&!a&&!1===this.options.active&&this._activate(0),"icons"===b&&(this._destroyIcons(),a&&this._createIcons()),"disabled"===b&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!a))},_keydown:function(b){if(!b.altKey&&!b.ctrlKey){var a=c.ui.keyCode,g=this.headers.length,e=this.headers.index(b.target),
f=!1;switch(b.keyCode){case a.RIGHT:case a.DOWN:f=this.headers[(e+1)%g];break;case a.LEFT:case a.UP:f=this.headers[(e-1+g)%g];break;case a.SPACE:case a.ENTER:this._eventHandler(b);break;case a.HOME:f=this.headers[0];break;case a.END:f=this.headers[g-1]}f&&(c(b.target).attr("tabIndex",-1),c(f).attr("tabIndex",0),f.focus(),b.preventDefault())}},_panelKeyDown:function(b){b.keyCode===c.ui.keyCode.UP&&b.ctrlKey&&c(b.currentTarget).prev().focus()},refresh:function(){var b,a,g=this.options.heightStyle,e=
this.element.parent();this.element.css("height",this.originalHeight);"fill"===g?(c.support.minHeight||(a=e.css("overflow"),e.css("overflow","hidden")),b=e.height(),this.element.siblings(":visible").each(function(){var a=c(this),e=a.css("position");"absolute"===e||"fixed"===e||(b-=a.outerHeight(!0))}),a&&e.css("overflow",a),this.headers.each(function(){b-=c(this).outerHeight(!0)}),this.headers.next().each(function(){c(this).height(Math.max(0,b-c(this).innerHeight()+c(this).height()))}).css("overflow",
"auto")):"auto"===g&&(b=0,this.headers.next().each(function(){b=Math.max(b,c(this).height("").height())}).height(b));"content"!==g&&this.element.height(this.element.height())},_activate:function(b){b=this._findActive(b)[0];b!==this.active[0]&&(b=b||this.active[0],this._eventHandler({target:b,currentTarget:b,preventDefault:c.noop}))},_findActive:function(b){return"number"===typeof b?this.headers.eq(b):c()},_setupEvents:function(b){var a={};b&&(c.each(b.split(" "),function(b,e){a[e]="_eventHandler"}),
this._on(this.headers,a))},_eventHandler:function(b){var a=this.options,g=this.active,e=c(b.currentTarget),f=e[0]===g[0],k=f&&a.collapsible,h=k?c():e.next(),d=g.next(),h={oldHeader:g,oldPanel:d,newHeader:k?c():e,newPanel:h};b.preventDefault();f&&!a.collapsible||!1===this._trigger("beforeActivate",b,h)||(a.active=k?!1:this.headers.index(e),this.active=f?c():e,this._toggle(h),g.removeClass("ui-accordion-header-active ui-state-active"),a.icons&&g.children(".ui-accordion-header-icon").removeClass(a.icons.activeHeader).addClass(a.icons.header),
f||(e.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),a.icons&&e.children(".ui-accordion-header-icon").removeClass(a.icons.header).addClass(a.icons.activeHeader),e.next().addClass("ui-accordion-content-active")))},_toggle:function(b){var a=b.newPanel,g=this.prevShow.length?this.prevShow:b.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0);this.prevShow=a;this.prevHide=g;this.options.animate?this._animate(a,g,b):(g.hide(),a.show(),this._toggleComplete(b));
g.attr({"aria-expanded":"false","aria-hidden":"true"});g.prev().attr("aria-selected","false");a.length&&g.length?g.prev().attr("tabIndex",-1):a.length&&this.headers.filter(function(){return 0===c(this).attr("tabIndex")}).attr("tabIndex",-1);a.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(b,a,g){var e,f,c,h=this;e=this.options.animate||{};var d=b.length&&(!a.length||b.index()<a.index())&&e.down||e,l=function(){b.removeData("ui-accordion-height");
h._toggleComplete(g)};"number"===typeof d&&(c=d);"string"===typeof d&&(f=d);f=f||d.easing||e.easing;c=c||d.duration||e.duration;if(!a.length)return b.animate(i,c,f,l);if(!b.length)return a.animate(j,c,f,l);e=b.show().outerHeight();a.animate(j,c,f);b.hide().data("ui-accordion-height",{total:e,toHide:a}).animate("content"===this.options.heightStyle?i:m,c,f,l)},_toggleComplete:function(b){var a=b.oldPanel;a.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");
a.length&&(a.parent()[0].className=a.parent()[0].className);this._trigger("activate",null,b)}});!1!==c.uiBackCompat&&(function(b,a){b.extend(a.options,{navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}});var g=a._create;a._create=function(){if(this.options.navigation){var a=this,f=this.element.find(this.options.header),c=f.next(),d=f.add(c).find("a").filter(this.options.navigationFilter)[0];d&&f.add(c).each(function(c){if(b.contains(this,d))return a.options.active=
Math.floor(c/2),!1})}g.call(this)}}(d,d.ui.accordion.prototype),function(b,a){b.extend(a.options,{heightStyle:null,autoHeight:!0,clearStyle:!1,fillSpace:!1});var c=a._create,e=a._setOption;b.extend(a,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle();c.call(this)},_setOption:function(a,b){if("autoHeight"===a||"clearStyle"===a||"fillSpace"===a)this.options.heightStyle=this._mergeHeightStyle();e.apply(this,arguments)},_mergeHeightStyle:function(){var a=this.options;
if(a.fillSpace)return"fill";if(a.clearStyle)return"content";if(a.autoHeight)return"auto"}})}(d,d.ui.accordion.prototype),function(b,a){b.extend(a.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var c=a._createIcons;a._createIcons=function(){this.options.icons&&(this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected);c.call(this)}}(d,d.ui.accordion.prototype),function(b,a){a.activate=a._activate;var c=a._findActive;a._findActive=
function(a){-1===a&&(a=!1);a&&"number"!==typeof a&&(a=this.headers.index(this.headers.filter(a)),-1===a&&(a=!1));return c.call(this,a)}}(d,d.ui.accordion.prototype),d.ui.accordion.prototype.resize=d.ui.accordion.prototype.refresh,function(b,a){b.extend(a.options,{change:null,changestart:null});var c=a._trigger;a._trigger=function(a,b,d){var h=c.apply(this,arguments);if(!h)return!1;"beforeActivate"===a?h=c.call(this,"changestart",b,{oldHeader:d.oldHeader,oldContent:d.oldPanel,newHeader:d.newHeader,
newContent:d.newPanel}):"activate"===a&&(h=c.call(this,"change",b,{oldHeader:d.oldHeader,oldContent:d.oldPanel,newHeader:d.newHeader,newContent:d.newPanel}));return h}}(d,d.ui.accordion.prototype),function(b,a){b.extend(a.options,{animate:null,animated:"slide"});var c=a._create;a._create=function(){var a=this.options;null===a.animate&&(a.animate=a.animated?"slide"===a.animated?300:"bounceslide"===a.animated?{duration:200,down:{easing:"easeOutBounce",duration:1E3}}:a.animated:!1);c.call(this)}}(d,
d.ui.accordion.prototype))})(d)}});
