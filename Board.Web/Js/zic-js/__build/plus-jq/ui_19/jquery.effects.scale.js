define(function(){return function(q){(function(c){c.effects.effect.puff=function(e,o){var d=c(this),b=c.effects.setMode(d,e.mode||"hide"),a="hide"===b,f=parseInt(e.percent,10)||150,k=f/100,j={height:d.height(),width:d.width()};c.extend(e,{effect:"scale",queue:!1,fade:!0,mode:b,complete:o,percent:a?f:100,from:a?j:{height:j.height*k,width:j.width*k}});d.effect(e)};c.effects.effect.scale=function(e,o){var d=c(this),b=c.extend(!0,{},e),a=c.effects.setMode(d,e.mode||"effect"),f=parseInt(e.percent,10)||
(0===parseInt(e.percent,10)?0:"hide"===a?0:100),k=e.direction||"both",j=e.origin,i={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()},h="horizontal"!==k?f/100:1,f="vertical"!==k?f/100:1;b.effect="size";b.queue=!1;b.complete=o;"effect"!==a&&(b.origin=j||["middle","center"],b.restore=!0);b.from=e.from||("show"===a?{height:0,width:0}:i);b.to={height:i.height*h,width:i.width*f,outerHeight:i.outerHeight*h,outerWidth:i.outerWidth*f};b.fade&&("show"===a&&(b.from.opacity=
0,b.to.opacity=1),"hide"===a&&(b.from.opacity=1,b.to.opacity=0));d.effect(b)};c.effects.effect.size=function(e,o){var d,b,a=c(this),f="position,top,bottom,left,right,width,height,overflow,opacity".split(","),k="position,top,bottom,left,right,overflow,opacity".split(","),j=["width","height","overflow"],i=["fontSize"],h=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],l=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],r=c.effects.setMode(a,e.mode||"effect"),p=e.restore||
"effect"!==r,n=e.scale||"both",m=e.origin||["middle","center"],g,q=a.css("position");"show"===r&&a.show();g={height:a.height(),width:a.width(),outerHeight:a.outerHeight(),outerWidth:a.outerWidth()};a.from=e.from||g;a.to=e.to||g;d={y:a.from.height/g.height,x:a.from.width/g.width};b={y:a.to.height/g.height,x:a.to.width/g.width};if("box"===n||"both"===n)d.y!==b.y&&(f=f.concat(h),a.from=c.effects.setTransition(a,h,d.y,a.from),a.to=c.effects.setTransition(a,h,b.y,a.to)),d.x!==b.x&&(f=f.concat(l),a.from=
c.effects.setTransition(a,l,d.x,a.from),a.to=c.effects.setTransition(a,l,b.x,a.to));if(("content"===n||"both"===n)&&d.y!==b.y)f=f.concat(i),a.from=c.effects.setTransition(a,i,d.y,a.from),a.to=c.effects.setTransition(a,i,b.y,a.to);c.effects.save(a,p?f:k);a.show();c.effects.createWrapper(a);a.css("overflow","hidden").css(a.from);m&&(m=c.effects.getBaseline(m,g),a.from.top=(g.outerHeight-a.outerHeight())*m.y,a.from.left=(g.outerWidth-a.outerWidth())*m.x,a.to.top=(g.outerHeight-a.to.outerHeight)*m.y,
a.to.left=(g.outerWidth-a.to.outerWidth)*m.x);a.css(a.from);if("content"===n||"both"===n)h=h.concat(["marginTop","marginBottom"]).concat(i),l=l.concat(["marginLeft","marginRight"]),j=f.concat(h).concat(l),a.find("*[width]").each(function(){var a=c(this),f=a.height(),g=a.width();p&&c.effects.save(a,j);a.from={height:f*d.y,width:g*d.x};a.to={height:f*b.y,width:g*b.x};d.y!==b.y&&(a.from=c.effects.setTransition(a,h,d.y,a.from),a.to=c.effects.setTransition(a,h,b.y,a.to));d.x!==b.x&&(a.from=c.effects.setTransition(a,
l,d.x,a.from),a.to=c.effects.setTransition(a,l,b.x,a.to));a.css(a.from);a.animate(a.to,e.duration,e.easing,function(){p&&c.effects.restore(a,j)})});a.animate(a.to,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){0===a.to.opacity&&a.css("opacity",a.from.opacity);"hide"===r&&a.hide();c.effects.restore(a,p?f:k);p||("static"===q?a.css({position:"relative",top:a.to.top,left:a.to.left}):c.each(["top","left"],function(c,b){a.css(b,function(b,d){var e=parseInt(d,10),f=c?a.to.left:a.to.top;
return"auto"===d?f+"px":e+f+"px"})}));c.effects.removeWrapper(a);o()}})}})(q)}});
