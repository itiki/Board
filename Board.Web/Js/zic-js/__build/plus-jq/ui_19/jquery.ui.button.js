define(function(){return function(g){(function(c){var h,i,j,e,g=function(){var a=c(this).find(":ui-button");setTimeout(function(){a.button("refresh")},1)},k=function(a){var b=a.name,d=a.form,f=c([]);b&&(f=d?c(d).find("[name='"+b+"']"):c("[name='"+b+"']",a.ownerDocument).filter(function(){return!this.form}));return f};c.widget("ui.button",{version:"@VERSION",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+
this.eventNamespace).bind("reset"+this.eventNamespace,g);"boolean"!==typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var a=this,b=this.options,d="checkbox"===this.type||"radio"===this.type,f="ui-state-hover"+(!d?" ui-state-active":"");null===b.label&&(b.label="input"===this.type?this.buttonElement.val():this.buttonElement.html());this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role",
"button").bind("mouseenter"+this.eventNamespace,function(){b.disabled||(c(this).addClass("ui-state-hover"),this===h&&c(this).addClass("ui-state-active"))}).bind("mouseleave"+this.eventNamespace,function(){b.disabled||c(this).removeClass(f)}).bind("click"+this.eventNamespace,function(a){b.disabled&&(a.preventDefault(),a.stopImmediatePropagation())});this.element.bind("focus"+this.eventNamespace,function(){a.buttonElement.addClass("ui-state-focus")}).bind("blur"+this.eventNamespace,function(){a.buttonElement.removeClass("ui-state-focus")});
d&&(this.element.bind("change"+this.eventNamespace,function(){e||a.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(a){b.disabled||(e=!1,i=a.pageX,j=a.pageY)}).bind("mouseup"+this.eventNamespace,function(a){if(!b.disabled&&(i!==a.pageX||j!==a.pageY))e=!0}));"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(b.disabled||e)return!1;c(this).toggleClass("ui-state-active");a.buttonElement.attr("aria-pressed",a.element[0].checked)}):"radio"===
this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(b.disabled||e)return!1;c(this).addClass("ui-state-active");a.buttonElement.attr("aria-pressed","true");var d=a.element[0];k(d).not(d).map(function(){return c(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(b.disabled)return!1;c(this).addClass("ui-state-active");h=this;a.document.one("mouseup",function(){h=null})}).bind("mouseup"+
this.eventNamespace,function(){if(b.disabled)return!1;c(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(a){if(b.disabled)return!1;(a.keyCode===c.ui.keyCode.SPACE||a.keyCode===c.ui.keyCode.ENTER)&&c(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace,function(){c(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(a){a.keyCode===c.ui.keyCode.SPACE&&c(this).click()}));this._setOption("disabled",b.disabled);
this._resetButton()},_determineButtonType:function(){var a,b;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button";"checkbox"===this.type||"radio"===this.type?(a=this.element.parents().last(),b="label[for='"+this.element.attr("id")+"']",this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=
a.find(b))),this.element.addClass("ui-helper-hidden-accessible"),(a=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",a)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-hover ui-state-active  ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());
this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(a,b){this._super(a,b);"disabled"===a?b?this.element.prop("disabled",!0):this.element.prop("disabled",!1):this._resetButton()},refresh:function(){var a=this.element.is(":disabled");a!==this.options.disabled&&this._setOption("disabled",a);"radio"===this.type?k(this.element[0]).each(function(){c(this).is(":checked")?c(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):c(this).button("widget").removeClass("ui-state-active").attr("aria-pressed",
"false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)this.options.label&&this.element.val(this.options.label);else{var a=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),
b=c("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(a.empty()).text(),d=this.options.icons,f=d.primary&&d.secondary,e=[];d.primary||d.secondary?(this.options.text&&e.push("ui-button-text-icon"+(f?"s":d.primary?"-primary":"-secondary")),d.primary&&a.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&a.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(e.push(f?"ui-button-icons-only":
"ui-button-icon-only"),this.hasTitle||a.attr("title",b))):e.push("ui-button-text-only");a.addClass(e.join(" "))}}});c.widget("ui.buttonset",{version:"@VERSION",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,b){"disabled"===a&&this.buttons.button("option",a,b);this._super(a,b)},refresh:function(){var a=
"rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return c(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(a?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(a?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return c(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(g)}});
